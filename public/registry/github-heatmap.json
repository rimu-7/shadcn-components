{
  "name": "github-heatmap",
  "type": "registry:ui",
  "dependencies": [
    "react-activity-calendar",
    "lucide-react",
    "date-fns",
    "next-themes"
  ],
  "registryDependencies": [
    "card",
    "skeleton",
    "alert",
    "button",
    "tooltip"
  ],
  "files": [
    {
      "path": "components/ui/github-heatmap.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport { ActivityCalendar } from \"react-activity-calendar\";\nimport { ExternalLink, AlertCircle } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useTheme } from \"next-themes\";\nimport { format } from \"date-fns\";\n\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n} from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\n\ninterface GithubHeatMapProps {\n  username: string;\n}\n\nexport function GithubHeatMap({ username }: GithubHeatMapProps) {\n  const { theme, systemTheme } = useTheme();\n  const [data, setData] = useState<any[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [total, setTotal] = useState(0);\n\n  const fetchData = useCallback(async () => {\n    if (!username) return;\n\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      const res = await fetch(\n        `https://github-contributions-api.jogruber.de/v4/${username}?y=last`\n      );\n\n      if (!res.ok) throw new Error(\"Failed to fetch GitHub data\");\n\n      const json = await res.json();\n      const contributions = json?.contributions ?? [];\n\n      setData(contributions);\n      setTotal(contributions.reduce((sum: number, d: any) => sum + d.count, 0));\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [username]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  const currentTheme = theme === \"system\" ? systemTheme : theme;\n\n  const colorTheme = {\n    light: [\"#ebedf0\", \"#9be9a8\", \"#40c463\", \"#30a14e\", \"#216e39\"],\n    dark: [\"#161b22\", \"#0e4429\", \"#006d32\", \"#26a641\", \"#39d353\"],\n  };\n\n  const renderBlock = (block: React.ReactElement, activity: any) => {\n    const trigger = React.cloneElement(block, {\n      className: \"cursor-pointer hover:opacity-80 transition-opacity\",\n    });\n\n    return (\n      <Tooltip key={activity.date}>\n        <TooltipTrigger asChild>{trigger}</TooltipTrigger>\n        <TooltipContent>\n          <div className=\"text-xs text-center\">\n            <div className=\"font-medium\">\n              {activity.count || \"No\"} contributions\n            </div>\n            <div className=\"text-muted-foreground\">\n              {format(new Date(activity.date), \"MMM d, yyyy\")}\n            </div>\n          </div>\n        </TooltipContent>\n      </Tooltip>\n    );\n  };\n\n  if (error) {\n    return (\n      <Alert variant=\"destructive\">\n        <AlertCircle className=\"h-4 w-4\" />\n        <AlertDescription>Failed to load GitHub data.</AlertDescription>\n      </Alert>\n    );\n  }\n\n  return (\n    <TooltipProvider delayDuration={0}>\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>GitHub Contributions</CardTitle>\n              {!isLoading && (\n                <CardDescription>\n                  <span className=\"font-medium\">{total}</span> contributions last\n                  year\n                </CardDescription>\n              )}\n            </div>\n\n            <Button size=\"icon\" variant=\"ghost\" asChild>\n              <Link\n                href={`https://github.com/${username}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <ExternalLink className=\"h-4 w-4\" />\n              </Link>\n            </Button>\n          </div>\n        </CardHeader>\n\n        <CardContent>\n          {isLoading ? (\n            <Skeleton className=\"h-36 w-full\" />\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <div className=\"min-w-[700px]\">\n                <ActivityCalendar\n                  data={data}\n                  theme={colorTheme}\n                  colorScheme={currentTheme === \"dark\" ? \"dark\" : \"light\"}\n                  blockSize={12}\n                  blockMargin={4}\n                  blockRadius={3}\n                  hideTotalCount\n                  renderBlock={renderBlock}\n                />\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </TooltipProvider>\n  );\n}\n",
      "type": "registry:ui",
      "target": "components/ui/github-heatmap.tsx"
    }
  ]
}